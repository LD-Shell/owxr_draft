<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welch Center Admin</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Oswald:wght@400;500;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div id="nc-root"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script src="https://unpkg.com/decap-cms-app@^3.0.0/dist/decap-cms-app.js"></script>
  
  <script>
    // Now 'React' and 'CMS' are both available globally
    const h = React.createElement;
    
    // Register Styles
    CMS.registerPreviewStyle("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Oswald:wght@400;500;700&display=swap");
    CMS.registerPreviewStyle("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css");
    CMS.registerPreviewStyle("../src/css/main.css");

    // Define the Custom Card Component (Using global React)
    const TeamPreview = createReactClass({
      render: function() {
        const entry = this.props.entry;
        const image = entry.getIn(['data', 'image']);
        const bgImage = this.props.getAsset(image);
        const name = entry.getIn(['data', 'name']);
        const role = entry.getIn(['data', 'role']);
        
        return h('div', { className: 'profile-card', style: { margin: '20px auto', maxWidth: '300px' } },
          image ? h('div', { className: 'profile-img-container' },
            h('img', { src: bgImage ? bgImage.toString() : '', className: 'profile-img' })
          ) : null,
          h('div', { className: 'profile-info' },
            h('h4', { className: 'profile-name' }, name),
            h('div', { className: 'profile-role', style: { fontWeight: '700' } }, role)
          )
        );
      }
    });

    // Register Component
    CMS.registerPreviewTemplate("team", TeamPreview);
    CMS.registerPreviewTemplate("members", TeamPreview);

    // Initialize CMS
    CMS.init();
  </script>
  
  <script src="https://unpkg.com/create-react-class/create-react-class.min.js"></script>
</body>
</html>