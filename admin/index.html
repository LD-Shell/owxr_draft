<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welch Center Admin</title>
  
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  
  <script src="https://unpkg.com/create-react-class/create-react-class.min.js"></script>
</head>
<body>
  <script>
    // Alias React.createElement as 'h' for convenience
    var h = React.createElement;
    
    // --- A. REGISTER STYLES ---
    CMS.registerPreviewStyle("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Oswald:wght@400;500;700&display=swap");
    CMS.registerPreviewStyle("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css");
    CMS.registerPreviewStyle("/src/css/main.css");

    // --- B. CUSTOM PREVIEW COMPONENTS ---
    var TeamPreview = createReactClass({
      render: function() {
        var entry = this.props.entry;
        var image = entry.getIn(['data', 'image']);
        var bgImage = image ? this.props.getAsset(image) : "";

        return h('div', {className: 'profile-card', style: {maxWidth: '300px', margin: '20px'}},
          image ? h('div', {className: 'profile-img-container'},
            h('img', {src: bgImage ? bgImage.toString() : '', className: 'profile-img', alt: entry.getIn(['data', 'name']) || ''})
          ) : null,
          h('div', {className: 'profile-info'},
            h('h4', {className: 'profile-name'}, entry.getIn(['data', 'name']) || ''),
            h('div', {className: 'profile-role', style: {fontWeight: '700'}}, entry.getIn(['data', 'role']) || ''),
            h('p', {style: {fontSize: '0.9rem', marginTop: '10px'}}, entry.getIn(['data', 'title_detail']) || ''),
            h('p', {style: {fontSize: '0.85rem', marginTop: '15px'}}, entry.getIn(['data', 'bio']) || '')
          )
        );
      }
    });

    // --- C. REGISTER THE PREVIEW COMPONENT ---
    // This is what you were missing
    CMS.registerPreviewTemplate('team', TeamPreview);
    
    // Also, you might want to initialize the CMS
    CMS.init();
  </script>
</body>
</html>